<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.1">
<meta name="author" content="Dut/Info-S3/M3105">
<meta name="copyright" content="{date=2014-11-25}, IUT Blagnac *** Dut/Info-S3/M3105 *** Powered by AsciiDoc and W3C Slidy &amp;#169;">
<title>CPOA - Sujet TP 2</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic|Noto+Serif:400,400italic,700,700italic|Droid+Sans+Mono:400">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="./pygments-default.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>CPOA - Sujet TP 2</h1>
<div class="details">
<span id="author" class="author">Dut/Info-S3/M3105</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_fichiers_utiles_pour_la_génération_de_modèles">1. Fichiers utiles pour la génération de modèles</a></li>
<li><a href="#_rappel_sur_le_patron_singleton">2. Rappel sur le patron Singleton</a></li>
<li><a href="#_reprise_du_td_2_en_mode_dojo_1ère_séance_de_tp">3. Reprise du TD 2 en mode Dojo (1ère séance de TP)</a>
<ul class="sectlevel2">
<li><a href="#_le_principe">3.1. Le principe :</a></li>
<li><a href="#_les_règles">3.2. Les règles</a></li>
</ul>
</li>
<li><a href="#_jeu_d_aventure_2ème_séance_de_tp">4. Jeu d&#8217;aventure (2ème séance de TP)</a>
<ul class="sectlevel2">
<li><a href="#_mise_en_oeuvre_de_singleton">4.1. Mise en oeuvre de Singleton</a></li>
<li><a href="#_modèles_et_tests_d_architecture">4.2. Modèles et tests d&#8217;architecture</a></li>
</ul>
</li>
<li><a href="#_pour_aller_plus_loin">Appendix A: Pour aller plus loin</a></li>
<li><a href="#_about">About&#8230;&#8203;</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<table id="cartouche" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 9%;">
<col style="width: 90%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PreReq</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1. Je sais programmer en <a href="https://www.java.com/fr/">Java</a>.
2. J&#8217;ai conscience qu&#8217;il faut réfléchir avant de se lancer dans le codage.
3. J&#8217;ai compris ce qu&#8217;est un patron.
4. J&#8217;ai réalisé le TD <code>BonChoco</code> et donc connait le patron Singleton!</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ObjTD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comprendre ce qu&#8217;est une <strong>conception</strong> et implémenter mon deuxième patron.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Durée</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>2</strong> TP de 1,5h (sur 2 semaines).</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_fichiers_utiles_pour_la_génération_de_modèles"><a class="link" href="#_fichiers_utiles_pour_la_génération_de_modèles">1. Fichiers utiles pour la génération de modèles</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>le <a href="util/plantuml.bat">plantuml.bat</a></p>
</li>
<li>
<p>la <a href="util/plantUmlDoclet.jar">doclet pour javadoc</a></p>
</li>
<li>
<p>le <a href="util/plantuml.jar">jar plantuml</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rappel_sur_le_patron_singleton"><a class="link" href="#_rappel_sur_le_patron_singleton">2. Rappel sur le patron Singleton</a></h2>
<div class="sectionbody">
<div id="Singleton" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="images/icons/pattern.jpeg" alt="Note">
</td>
<td class="content">
<div class="title">Design pattern : <strong>Singleton</strong></div>
<div class="paragraph">
<p><strong>Singleton</strong> garantit qu&#8217;une classe n&#8217;a qu&#8217;une seule instance et
fournit un point d&#8217;accès global à cette instance.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/singleton.png" alt="singleton">
</div>
<div class="title">Figure 1. Modèle UML du patron <em>Singleton</em></div>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<img src="images/icons/tip.png" alt="Tip">
</td>
<td class="content">
N&#8217;hésitez pas à (re)lire régulièrement le <a href="http://jmbruel.github.io/cpoa/">Support de Cours</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reprise_du_td_2_en_mode_dojo_1ère_séance_de_tp"><a class="link" href="#_reprise_du_td_2_en_mode_dojo_1ère_séance_de_tp">3. Reprise du TD 2 en mode Dojo (1ère séance de TP)</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nous allons reprendre succinctement
le <a href="http://iut-blagnac.github.io/cpoa/TD2.html">TD2</a> en mode
<a href="http://fr.wikipedia.org/wiki/Coding_Dojo">Coding Dojo</a> en espérant
que cela vous donne envie de participer à ceux organisés certains jeudi à l&#8217;IUT.</p>
</div>
<div class="sect2">
<h3 id="_le_principe"><a class="link" href="#_le_principe">3.1. Le principe :</a></h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Le prof de TP initie l&#8217;exercice en ouvrant un eclipse et en commençant un
test qui commence par échouer et qui "passera" quand la fonctionalité attendue
sera implémentée et fonctionnelle.</p>
</li>
<li>
<p>Il vérifie que son test échoue bien</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<img src="images/icons/tip.png" alt="Tip">
</td>
<td class="content">
On pourra avantageusement installer le plug-in eclipse
<a href="http://infinitest.github.io/">InfiniTest</a> qui permet de runner les tests à
chaque sauvegarde
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Il fait en sorte que le test passe au vert  le plus vite possible</p>
</li>
<li>
<p>Il "refactor" éventuellement (faire passer le test au vert mais de façon
intelligente, éviter la duplication de code, réorganiser les classes, etc.)</p>
</li>
<li>
<p>Quand tout est au vert on passe à une fonctionnalité suivante</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_les_règles"><a class="link" href="#_les_règles">3.2. Les règles</a></h3>
<div class="ulist">
<ul>
<li>
<p>Toutes les 5 minutes (timer sonore) on change de personne aux commandes
(au clavier/souris en l&#8217;occurence)</p>
</li>
<li>
<p>Il faut un "maître du temps"</p>
</li>
<li>
<p>Tout le monde participe au codage (et ne fait pas du code de son côté)</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="images/icons/note.png" alt="Note">
</td>
<td class="content">
Les machines ne sont donc pas utiles pour cette partie! Seule la machine
connectée au vidéoprojecteur est utilisée.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Le volontariat c&#8217;est mieux, mais le prof est libre d&#8217;organiser le tour de rôle.</p>
</li>
<li>
<p>En 90' de TP on peut faire passer 18 personnes, donc tout le monde y passe et
le plus tôt est en général le moins compliqué.</p>
</li>
<li>
<p>Merci à ceux qui ont déjà participé aux coding dojos de montrer l&#8217;exemple ;-)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jeu_d_aventure_2ème_séance_de_tp"><a class="link" href="#_jeu_d_aventure_2ème_séance_de_tp">4. Jeu d&#8217;aventure (2ème séance de TP)</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_mise_en_oeuvre_de_singleton"><a class="link" href="#_mise_en_oeuvre_de_singleton">4.1. Mise en oeuvre de Singleton</a></h3>
<div class="paragraph">
<p>En reprenant le jeu d&#8217;aventure du TP1 :</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/aventure.png"><img src="images/aventure.png" alt="aventure"></a>
</div>
<div class="title">Figure 2. Un jeu d&#8217;aventure minimaliste</div>
</div>
<div class="paragraph">
<p>Implémentez le patron singleton comme demandé à la
<a href="http://iut-blagnac.github.io/cpoa/TD2.html#_et_si_on_améliorait_le_jeu_d_aventure_avec_singleton">section 4.2 du TD2</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_modèles_et_tests_d_architecture"><a class="link" href="#_modèles_et_tests_d_architecture">4.2. Modèles et tests d&#8217;architecture</a></h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>En utilisant la doclet pour Javadoc de <a href="http://plantuml.sourceforge.net/">plantUML</a>, comme au TP1, générez votre diagramme
de classe automatiquement</p>
</li>
<li>
<p>Réalisez un test en Java de votre architecture, en vous inspirant du code de
test qui vérifie quelques points simples de l&#8217;architecture de l&#8217;application <code>SuperCanard</code> :</p>
<div class="listingblock">
<div class="title">Test du patron <em>Strategy</em> sur les <code>Canard</code> en Ruby (source <a href="src/java/TD1/checkModel.rb">ici</a>)</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="ruby"><span class="tok-nb">require</span> <span class="tok-s2">&quot;minitest/autorun&quot;</span>
<span class="tok-no">MODEL_NAME</span> <span class="tok-o">=</span> <span class="tok-s2">&quot;model.uml&quot;</span>

<span class="tok-k">module</span> <span class="tok-nn">MiniTest</span>
  <span class="tok-k">class</span> <span class="tok-nc">Unit</span>
    <span class="tok-k">class</span> <span class="tok-nc">TestCase</span>
      <span class="tok-c1">#Define new assertion</span>
      <span class="tok-k">def</span> <span class="tok-nf">assert_contains</span><span class="tok-p">(</span><span class="tok-n">string_to_test</span><span class="tok-p">,</span> <span class="tok-n">substring_to_verify</span><span class="tok-p">)</span>
        <span class="tok-n">assert_match</span><span class="tok-p">(</span> <span class="tok-n">string_to_test</span><span class="tok-p">,</span> <span class="tok-n">substring_to_verify</span><span class="tok-p">)</span>
      <span class="tok-k">end</span>
      <span class="tok-k">def</span> <span class="tok-nf">assert_not_contains</span><span class="tok-p">(</span><span class="tok-n">string_to_test</span><span class="tok-p">,</span> <span class="tok-n">substring_to_verify</span><span class="tok-p">)</span>
        <span class="tok-n">assert_not_match</span><span class="tok-p">(</span> <span class="tok-n">string_to_test</span><span class="tok-p">,</span> <span class="tok-n">substring_to_verify</span><span class="tok-p">)</span>
      <span class="tok-k">end</span>
    <span class="tok-k">end</span>
  <span class="tok-k">end</span>
<span class="tok-k">end</span>
<span class="tok-no">MiniTest</span><span class="tok-o">::</span><span class="tok-no">Unit</span><span class="tok-o">.</span><span class="tok-n">after_tests</span> <span class="tok-p">{</span> <span class="tok-nb">p</span> <span class="tok-vi">@_assertions</span> <span class="tok-p">}</span>

<span class="tok-k">class</span> <span class="tok-nc">TestGeneratedModel</span> <span class="tok-o">&lt;</span> <span class="tok-no">MiniTest</span><span class="tok-o">::</span><span class="tok-no">Unit</span><span class="tok-o">::</span><span class="tok-no">TestCase</span>
  <span class="tok-c1">#------------ General tests about plantUML</span>
  <span class="tok-k">def</span> <span class="tok-nf">test_generated_model_exists</span>
    <span class="tok-nb">print</span> <span class="tok-n">assert_equal</span><span class="tok-p">(</span><span class="tok-kp">true</span><span class="tok-p">,</span> <span class="tok-no">File</span><span class="tok-o">.</span><span class="tok-n">exists?</span><span class="tok-p">(</span><span class="tok-no">MODEL_NAME</span><span class="tok-p">))</span>
  <span class="tok-k">end</span>

  <span class="tok-k">def</span> <span class="tok-nf">test_generated_model_is_plantuml</span>
    <span class="tok-n">assert_equal</span><span class="tok-p">(</span><span class="tok-kp">true</span><span class="tok-p">,</span> <span class="tok-no">File</span><span class="tok-o">.</span><span class="tok-n">readlines</span><span class="tok-p">(</span><span class="tok-no">MODEL_NAME</span><span class="tok-p">)</span><span class="tok-o">.</span><span class="tok-n">grep</span><span class="tok-p">(</span><span class="tok-sr">/@startuml/</span><span class="tok-p">)</span><span class="tok-o">.</span><span class="tok-n">any?</span><span class="tok-p">)</span>
    <span class="tok-n">assert_equal</span><span class="tok-p">(</span><span class="tok-kp">true</span><span class="tok-p">,</span> <span class="tok-no">File</span><span class="tok-o">.</span><span class="tok-n">readlines</span><span class="tok-p">(</span><span class="tok-no">MODEL_NAME</span><span class="tok-p">)</span><span class="tok-o">.</span><span class="tok-n">grep</span><span class="tok-p">(</span><span class="tok-sr">/@enduml/</span><span class="tok-p">)</span><span class="tok-o">.</span><span class="tok-n">any?</span><span class="tok-p">)</span>
  <span class="tok-k">end</span>

  <span class="tok-k">def</span> <span class="tok-nf">test_generated_model_exists</span>
    <span class="tok-n">assert_equal</span><span class="tok-p">(</span><span class="tok-kp">true</span><span class="tok-p">,</span> <span class="tok-no">File</span><span class="tok-o">.</span><span class="tok-n">exists?</span><span class="tok-p">(</span><span class="tok-no">MODEL_NAME</span><span class="tok-p">))</span>
  <span class="tok-k">end</span>

  <span class="tok-c1">#------------ Specific tests about expected content</span>
  <span class="tok-k">def</span> <span class="tok-nf">test_class_Canard_is_abstract</span>
    <span class="tok-n">assert_equal</span><span class="tok-p">(</span><span class="tok-kp">true</span><span class="tok-p">,</span> <span class="tok-no">File</span><span class="tok-o">.</span><span class="tok-n">readlines</span><span class="tok-p">(</span><span class="tok-no">MODEL_NAME</span><span class="tok-p">)</span><span class="tok-o">.</span><span class="tok-n">grep</span><span class="tok-p">(</span><span class="tok-sr">/abstract Canard/</span><span class="tok-p">)</span><span class="tok-o">.</span><span class="tok-n">any?</span><span class="tok-p">)</span>
  <span class="tok-k">end</span>

  <span class="tok-k">def</span> <span class="tok-nf">test_class_Canard_has_ComportementCancan_behavior</span>
    <span class="tok-n">assert_contains</span><span class="tok-p">(</span><span class="tok-sr">/Canard\s+--&gt; &quot;.*&quot; ComportementCancan/</span><span class="tok-p">,</span> <span class="tok-no">File</span><span class="tok-o">.</span><span class="tok-n">readlines</span><span class="tok-p">(</span><span class="tok-no">MODEL_NAME</span><span class="tok-p">)</span><span class="tok-o">.</span><span class="tok-n">join</span><span class="tok-p">)</span>
  <span class="tok-k">end</span>

  <span class="tok-k">def</span> <span class="tok-nf">test_class_Canard_has_ComportementVol_behavior</span>
    <span class="tok-n">assert_contains</span><span class="tok-p">(</span><span class="tok-sr">/Canard\s+--&gt; &quot;.*&quot; ComportementVol/</span><span class="tok-p">,</span> <span class="tok-no">File</span><span class="tok-o">.</span><span class="tok-n">readlines</span><span class="tok-p">(</span><span class="tok-no">MODEL_NAME</span><span class="tok-p">)</span><span class="tok-o">.</span><span class="tok-n">join</span><span class="tok-p">)</span>
  <span class="tok-k">end</span>

  <span class="tok-k">def</span> <span class="tok-nf">test_ComportementCancan_is_an_Interface</span>
    <span class="tok-n">assert_equal</span><span class="tok-p">(</span><span class="tok-kp">true</span><span class="tok-p">,</span> <span class="tok-no">File</span><span class="tok-o">.</span><span class="tok-n">readlines</span><span class="tok-p">(</span><span class="tok-no">MODEL_NAME</span><span class="tok-p">)</span><span class="tok-o">.</span><span class="tok-n">grep</span><span class="tok-p">(</span><span class="tok-sr">/interface\s+ComportementCancan/</span><span class="tok-p">)</span><span class="tok-o">.</span><span class="tok-n">any?</span><span class="tok-p">)</span>
  <span class="tok-k">end</span>

  <span class="tok-k">def</span> <span class="tok-nf">test_ComportementVol_is_an_Interface</span>
    <span class="tok-n">assert_equal</span><span class="tok-p">(</span><span class="tok-kp">true</span><span class="tok-p">,</span> <span class="tok-no">File</span><span class="tok-o">.</span><span class="tok-n">readlines</span><span class="tok-p">(</span><span class="tok-no">MODEL_NAME</span><span class="tok-p">)</span><span class="tok-o">.</span><span class="tok-n">grep</span><span class="tok-p">(</span><span class="tok-sr">/interface\s+ComportementVol/</span><span class="tok-p">)</span><span class="tok-o">.</span><span class="tok-n">any?</span><span class="tok-p">)</span>
  <span class="tok-k">end</span>

  <span class="tok-k">def</span> <span class="tok-nf">test_ComportementCancan_Interface_has_concrete_implementation</span>
    <span class="tok-n">assert_equal</span><span class="tok-p">(</span><span class="tok-kp">true</span><span class="tok-p">,</span> <span class="tok-no">File</span><span class="tok-o">.</span><span class="tok-n">readlines</span><span class="tok-p">(</span><span class="tok-no">MODEL_NAME</span><span class="tok-p">)</span><span class="tok-o">.</span><span class="tok-n">grep</span><span class="tok-p">(</span><span class="tok-sr">/ComportementCancan\s+&lt;\|\.\./</span><span class="tok-p">)</span><span class="tok-o">.</span><span class="tok-n">any?</span><span class="tok-p">)</span>
  <span class="tok-k">end</span>

  <span class="tok-k">def</span> <span class="tok-nf">test_ComportementVol_Interface_has_concrete_implementation</span>
    <span class="tok-n">assert_equal</span><span class="tok-p">(</span><span class="tok-kp">true</span><span class="tok-p">,</span> <span class="tok-no">File</span><span class="tok-o">.</span><span class="tok-n">readlines</span><span class="tok-p">(</span><span class="tok-no">MODEL_NAME</span><span class="tok-p">)</span><span class="tok-o">.</span><span class="tok-n">grep</span><span class="tok-p">(</span><span class="tok-sr">/ComportementVol\s+&lt;\|\.\./</span><span class="tok-p">)</span><span class="tok-o">.</span><span class="tok-n">any?</span><span class="tok-p">)</span>
  <span class="tok-k">end</span>

<span class="tok-k">end</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pour_aller_plus_loin"><a class="link" href="#_pour_aller_plus_loin">Appendix A: Pour aller plus loin</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Reprenez les section "pour aller plus loin" des TDs 1 et 2.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_about"><a class="link" href="#_about">About&#8230;&#8203;</a></h2>
<div class="sectionbody">
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>Document réalisé par <a href="mailto:{email}">Dut/Info-S3/M3105</a> via  <a href="http://asciidoctor.org/">Asciidoctor</a> (version <code>1.5.1</code>) de 'Dan Allen', lui même basé sur <a href="http://www.methods.co.nz/asciidoc">AsciiDoc</a>.
Pour l&#8217;instant ce document est libre d&#8217;utilisation et géré par la 'Licence Creative Commons'.
<span class="image"><a class="image" href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="images/88x31.png" alt="Licence Creative Commons"></a></span>
<a href="http://creativecommons.org/licenses/by-sa/3.0/">licence Creative Commons Paternité - Partage à l&#39;Identique 3.0 non transposé</a>.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2014-11-25 15:11:34 CET
</div>
</div>
</body>
</html>