<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<meta name="author" content="Dut/Info-S3/M3105 - Semaine 3 (49)">
<meta name="copyright" content="{date=2014-12-01}, IUT Blagnac *** Dut/Info-S3/M3105 - Semaine 3 (49) *** Powered by AsciiDoc and W3C Slidy &amp;#169;">
<title>CPOA - Sujet TD 3</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="./pygments-default.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>CPOA - Sujet TD 3</h1>
<div class="details">
<span id="author" class="author">Dut/Info-S3/M3105 - Semaine 3 (49)</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_rappel_du_cours">1. Rappel du cours</a></li>
<li><a href="#_la_pizzeria_o_reilly">2. La pizzeria O&#8217;Reilly</a></li>
<li><a href="#_on_y_est_presque">3. On y est presque&#8230;&#8203;</a>
<ul class="sectlevel2">
<li><a href="#_succès_des_pizzerias_o_reilly_les_franchises">3.1. Succès des pizzerias O&#8217;Reilly : les franchises</a></li>
<li><a href="#_la_dérive_chacun_travaille_comme_il_l_entend">3.2. La dérive : chacun travaille comme il l&#8217;entend!</a></li>
<li><a href="#_laisser_les_sous_classes_décider">3.3. Laisser les sous-classes décider</a></li>
<li><a href="#_déclarer_une_méthode_de_fabrique">3.4. Déclarer une méthode de fabrique</a></li>
<li><a href="#_récapitulons">3.5. Récapitulons</a></li>
</ul>
</li>
<li><a href="#_le_patron_fabrique_simple">4. Le patron Fabrique (simple)</a></li>
<li><a href="#_pour_aller_plus_loin">Pour aller plus loin</a>
<ul class="sectlevel2">
<li><a href="#_et_les_pizzas_dans_tout_ça">Et les pizzas dans tout ça !?</a></li>
<li><a href="#_et_sans_patron_ça_donne_quoi">Et sans patron, ça donne quoi ?</a></li>
<li><a href="#_problème_du_main_de_test_du_jeu_d_aventure">Problème du main de test du jeu d&#8217;aventure</a></li>
</ul>
</li>
<li><a href="#_about">About&#8230;&#8203;</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<table id="cartouche" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 9%;">
<col style="width: 90%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PreReq</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1. Je sais programmer en <a href="https://www.java.com/fr/">Java</a>.
2. J&#8217;ai conscience qu&#8217;il faut réfléchir avant de se lancer dans le codage.
3. Je maîtrise les concepts objet de base (héritage, polymorphisme, &#8230;&#8203;).
4. J&#8217;ai compris ce qu&#8217;est un patron et j&#8217;ai grand soif d&#8217;en apprendre d&#8217;autres que
<em>Strategy</em> et Singleton</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ObjTD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aborder le patron <strong>fabrique</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Durée</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>1</strong> TD et <strong>2</strong> TP de 1,5h (sur 2 semaines).</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_rappel_du_cours"><a class="link" href="#_rappel_du_cours">1. Rappel du cours</a></h2>
<div class="sectionbody">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<img src="images/icons/tip.png" alt="Tip">
</td>
<td class="content">
N&#8217;hésitez pas à (re)lire régulièrement le <a href="http://iut-blagnac.github.io/cpoa/">Support de Cours</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_la_pizzeria_o_reilly"><a class="link" href="#_la_pizzeria_o_reilly">2. La pizzeria O&#8217;Reilly</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vous êtes embauché dans une pizzeria pour faire &#8230;&#8203; de l&#8217;informatique!</p>
</div>
<div class="paragraph">
<p>Le stagiaire de l&#8217;an dernier qui avait travaillé sur le code est parti avec
la caisse (de Chianti). Vous n&#8217;avez à votre disposition sur :</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Soit le code de départ suivant :</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-cm">/**</span>
<span class="tok-cm"> * @author bruel (from O&#39;Reilly Head-First series)</span>
<span class="tok-cm"> */</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Pizzeria</span> <span class="tok-o">{</span>

	<span class="tok-kd">public</span> <span class="tok-n">Pizza</span> <span class="tok-nf">commanderPizza</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">type</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">Pizza</span> <span class="tok-n">pizza</span><span class="tok-o">;</span>

		<span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">type</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-s">&quot;fromage&quot;</span><span class="tok-o">))</span> <span class="tok-o">{</span>
			<span class="tok-n">pizza</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">PizzaFromage</span><span class="tok-o">();</span>
		<span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-nf">if</span> <span class="tok-o">(</span><span class="tok-n">type</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-s">&quot;grecque&quot;</span><span class="tok-o">))</span> <span class="tok-o">{</span>
			<span class="tok-n">pizza</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">PizzaGrecque</span><span class="tok-o">();</span>
		<span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-o">{</span>
			<span class="tok-n">pizza</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">PizzaPoivrons</span><span class="tok-o">();</span>
		<span class="tok-o">}</span>

		<span class="tok-n">pizza</span><span class="tok-o">.</span><span class="tok-na">preparer</span><span class="tok-o">();</span>
		<span class="tok-n">pizza</span><span class="tok-o">.</span><span class="tok-na">cuire</span><span class="tok-o">();</span>
		<span class="tok-n">pizza</span><span class="tok-o">.</span><span class="tok-na">couper</span><span class="tok-o">();</span>
		<span class="tok-n">pizza</span><span class="tok-o">.</span><span class="tok-na">emballer</span><span class="tok-o">();</span>

		<span class="tok-k">return</span> <span class="tok-n">pizza</span><span class="tok-o">;</span>
		<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>L&#8217;ébauche de diagramme de classe des pizzas suivant :</p>
<div class="imageblock">
<div class="content">
<img src="images/Pizzas.png" alt="Pizzas">
</div>
</div>
</li>
<li>
<p>Le bout de code de test suivant :</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Pizzeria</span> <span class="tok-n">boutiqueBrest</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Pizzeria</span><span class="tok-o">();</span>
<span class="tok-n">boutiqueBrest</span><span class="tok-o">.</span><span class="tok-na">commanderPizza</span><span class="tok-o">(</span><span class="tok-s">&quot;fromage&quot;</span><span class="tok-o">);</span>
<span class="tok-o">...</span>
<span class="tok-n">Pizzeria</span> <span class="tok-n">boutiqueStrasbourg</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Pizzeria</span><span class="tok-o">();</span>
<span class="tok-n">boutiqueStrasbourg</span><span class="tok-o">.</span><span class="tok-na">commanderPizza</span><span class="tok-o">(</span><span class="tok-s">&quot;grecque&quot;</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<img src="images/icons/warning.png" alt="Warning">
</td>
<td class="content">
<div class="title"><strong>QUESTION</strong></div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Identifiez ce qui varie dans ce code (si la pression du marché fait
ajouter des pizzas à la carte ou si une pizza n&#8217;a plus de succès et doit
disparaître, etc.).</p>
</li>
<li>
<p>Isolez dans une classe <code>SimpleFabriqueDePizzas</code> ce code.</p>
</li>
<li>
<p>Réalisez le diagramme de classe obtenu.</p>
</li>
<li>
<p>Quel est l’avantage de procéder ainsi ? Ne transfère-t&#8217;on pas
simplement le problème à un autre objet ?</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<img src="images/icons/tip.png" alt="Tip">
</td>
<td class="content">
Bien sûr vous héritez de cet horrible "if then else" et dans
votre implémentation en TP vous remplacerez ce code avantageusement
par un "switch case" et utilisez une <code>enum</code> comme vu en cours.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_on_y_est_presque"><a class="link" href="#_on_y_est_presque">3. On y est presque&#8230;&#8203;</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nous sommes arrivés à une situation propre, qui s&#8217;apparente
à un patron de conception. Mais avant d&#8217;en arriver à la définition
du patron lui-même, nous allons améliorer un peu les choses.</p>
</div>
<div class="sect2">
<h3 id="_succès_des_pizzerias_o_reilly_les_franchises"><a class="link" href="#_succès_des_pizzerias_o_reilly_les_franchises">3.1. Succès des pizzerias O&#8217;Reilly : les franchises</a></h3>
<div class="paragraph">
<p>Plusieurs villes veulent ouvrir des pizzerias comme la votre.
Votre patron, très content de vos programmes souhaite imposer à toutes
les futures pizzerias d&#8217;utiliser vos codes.</p>
</div>
<div class="paragraph">
<p>Le problème : les pizzas au fromage de Starsbourg sont différentes
des pizzas aux fromages de Corse!</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<img src="images/icons/warning.png" alt="Warning">
</td>
<td class="content">
<div class="title"><strong>QUESTION</strong></div>
<div class="paragraph">
<p>Proposez une solution où <code>SimpleFabriqueDePizzas</code> serait une
classe abstraite.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_la_dérive_chacun_travaille_comme_il_l_entend"><a class="link" href="#_la_dérive_chacun_travaille_comme_il_l_entend">3.2. La dérive : chacun travaille comme il l&#8217;entend!</a></h3>
<div class="paragraph">
<p>Les pizzerias utilisent bien vos fabriques mais ont changé
les procédures : certains ne coupent pas les pizzas, changent les
temps de cuissons, et les pizzerias O&#8217;Reilly perdent leur
identité. Il nous faut <strong>restructurer</strong> les pizzerias.</p>
</div>
<div class="paragraph">
<p>Un consultant italien payé fort cher (heureusement en pizzas!)
propose de revenir à la structure suivante :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">abstract</span> <span class="tok-kd">class</span> <span class="tok-nc">Pizzeria</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">final</span> <span class="tok-n">Pizza</span> <span class="tok-nf">commanderPizza</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">type</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">Pizza</span> <span class="tok-n">pizza</span><span class="tok-o">;</span>

		<span class="tok-n">pizza</span> <span class="tok-o">=</span> <span class="tok-n">creerPizza</span><span class="tok-o">(</span><span class="tok-n">type</span><span class="tok-o">);</span>
		<span class="tok-n">pizza</span><span class="tok-o">.</span><span class="tok-na">preparer</span><span class="tok-o">();</span>
		<span class="tok-n">pizza</span><span class="tok-o">.</span><span class="tok-na">cuire</span><span class="tok-o">();</span>
		<span class="tok-n">pizza</span><span class="tok-o">.</span><span class="tok-na">couper</span><span class="tok-o">();</span>
		<span class="tok-n">pizza</span><span class="tok-o">.</span><span class="tok-na">emballer</span><span class="tok-o">();</span>

		<span class="tok-k">return</span> <span class="tok-n">pizza</span><span class="tok-o">;</span>
	<span class="tok-o">}</span>

	<span class="tok-o">.......</span> <span class="tok-n">Pizza</span> <span class="tok-nf">creerPizza</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">type</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<img src="images/icons/warning.png" alt="Warning">
</td>
<td class="content">
<div class="title"><strong>QUESTION</strong></div>
<div class="paragraph">
<p>Quelles sont les différences avec notre conception actuelle?</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_laisser_les_sous_classes_décider"><a class="link" href="#_laisser_les_sous_classes_décider">3.3. Laisser les sous-classes décider</a></h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<img src="images/icons/warning.png" alt="Warning">
</td>
<td class="content">
<div class="title"><strong>QUESTION</strong></div>
<div class="paragraph">
<p>Dans le schéma suivant, placez les méthodes au bon endroit de
façon à ce que les procédures soient respectées tout en ayant des pizzas
à variantes "régionales".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Pizzeria3.png" alt="Pizzeria3">
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_déclarer_une_méthode_de_fabrique"><a class="link" href="#_déclarer_une_méthode_de_fabrique">3.4. Déclarer une méthode de fabrique</a></h3>
<div class="paragraph">
<p>Rien qu&#8217;en apportant une ou deux transformations à <code>Pizzeria</code>,
nous sommes passés d&#8217;un objet gérant l&#8217;instanciation de nos classes concrètes
à un ensemble de sous-classes qui assument maintenant cette responsabilité.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<img src="images/icons/warning.png" alt="Warning">
</td>
<td class="content">
<div class="title"><strong>QUESTION</strong></div>
<div class="paragraph">
<p>Quelle est la déclaration exacte de la méthode <code>creerPizza()</code>
de la classe <code>Pizzeria</code> ?</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_récapitulons"><a class="link" href="#_récapitulons">3.5. Récapitulons</a></h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<img src="images/icons/warning.png" alt="Warning">
</td>
<td class="content">
<div class="title"><strong>QUESTION</strong></div>
<div class="paragraph">
<p>Donnez le diagramme de séquence d&#8217;une "commande de pizza au fromage
de type Strasbourg".</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="images/icons/note.png" alt="Note">
</td>
<td class="content">
Vous implémenterez les classes manquantes en TP.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_le_patron_fabrique_simple"><a class="link" href="#_le_patron_fabrique_simple">4. Le patron Fabrique (simple)</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nous y sommes, vous venez de décortiquer le patron Fabrique Simple</p>
</div>
<div id="Fabrique" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="images/icons/pattern.jpeg" alt="Note">
</td>
<td class="content">
<div class="title">Design pattern : <strong>Fabrique (simple)</strong></div>
<div class="paragraph">
<p><strong>Fabrique</strong> (simple) définit une interface pour la création d&#8217;un objet, mais en laissant
à des sous-classes le choix des classes à instancier (voir aussi <a href="#FabriqueAbstraite">Fabrique abstraite</a>).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fabrique.png" alt="fabrique">
</div>
<div class="title">Figure 1. Modèle UML du patron Fabrique</div>
</div>
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/google-fabrique.png"><img src="images/google-fabrique.png" alt="google fabrique"></a>
</div>
<div class="title">Figure 2. Quelques exemples de description du patron Fabrique</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pour_aller_plus_loin"><a class="link" href="#_pour_aller_plus_loin">Pour aller plus loin</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_et_les_pizzas_dans_tout_ça"><a class="link" href="#_et_les_pizzas_dans_tout_ça">Et les pizzas dans tout ça !?</a></h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<img src="images/icons/warning.png" alt="Warning">
</td>
<td class="content">
<div class="title"><strong>QUESTION</strong></div>
<div class="paragraph">
<p>Proposez un diagramme de classe UML pour les pizzas (classes, attributs et méthodes).</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_et_sans_patron_ça_donne_quoi"><a class="link" href="#_et_sans_patron_ça_donne_quoi">Et sans patron, ça donne quoi ?</a></h3>
<div class="paragraph">
<p>Un stagiaire de l&#8217;an dernier (les patrons n&#8217;étaient pas au programme du PPN!)
a réalisé l&#8217;an dernier le programme suivant :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">PizzeriaDependante</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-n">Pizza</span> <span class="tok-nf">creerPizza</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">style</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">type</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">Pizza</span> <span class="tok-n">pizza</span> <span class="tok-o">=</span> <span class="tok-kc">null</span><span class="tok-o">;</span>

		<span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">style</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-s">&quot;Brest&quot;</span><span class="tok-o">))</span> <span class="tok-o">{</span>
			<span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">type</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-s">&quot;fromage&quot;</span><span class="tok-o">))</span> <span class="tok-o">{</span>
				<span class="tok-n">pizza</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">PizzaFromageStyleBrest</span><span class="tok-o">();</span>
			<span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-nf">if</span> <span class="tok-o">(</span><span class="tok-n">type</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-s">&quot;vegetarienne&quot;</span><span class="tok-o">))</span> <span class="tok-o">{</span>
				<span class="tok-n">pizza</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">PizzaVegetarienneStyleBrest</span><span class="tok-o">();</span>
			<span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-nf">if</span> <span class="tok-o">(</span><span class="tok-n">type</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-s">&quot;fruitsDeMer&quot;</span><span class="tok-o">))</span> <span class="tok-o">{</span>
				<span class="tok-n">pizza</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">PizzaFruitsDeMerStyleBrest</span><span class="tok-o">();</span>
			<span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-nf">if</span> <span class="tok-o">(</span><span class="tok-n">type</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-s">&quot;poivrons&quot;</span><span class="tok-o">))</span> <span class="tok-o">{</span>
				<span class="tok-n">pizza</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">PizzaPoivronsStyleBrest</span><span class="tok-o">();</span>
			<span class="tok-o">}</span>
		<span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-nf">if</span> <span class="tok-o">(</span><span class="tok-n">style</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-s">&quot;Strasbourg&quot;</span><span class="tok-o">))</span> <span class="tok-o">{</span>
			<span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">type</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-s">&quot;fromage&quot;</span><span class="tok-o">))</span> <span class="tok-o">{</span>
				<span class="tok-n">pizza</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">PizzaFromageStyleStrasbourg</span><span class="tok-o">();</span>
			<span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-nf">if</span> <span class="tok-o">(</span><span class="tok-n">type</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-s">&quot;vegetarienne&quot;</span><span class="tok-o">))</span> <span class="tok-o">{</span>
				<span class="tok-n">pizza</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">PizzaVegetarienneStyleStrasbourg</span><span class="tok-o">();</span>
			<span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-nf">if</span> <span class="tok-o">(</span><span class="tok-n">type</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-s">&quot;fruitsDeMer&quot;</span><span class="tok-o">))</span> <span class="tok-o">{</span>
				<span class="tok-n">pizza</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">PizzaFruitsDeMerStyleStrasbourg</span><span class="tok-o">();</span>
			<span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-nf">if</span> <span class="tok-o">(</span><span class="tok-n">type</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-s">&quot;poivrons&quot;</span><span class="tok-o">))</span> <span class="tok-o">{</span>
				<span class="tok-n">pizza</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">PizzaPoivronsStyleStrasbourg</span><span class="tok-o">();</span>
			<span class="tok-o">}</span>
		<span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-o">{</span>
			<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Erreur : type de pizza invalide&quot;</span><span class="tok-o">);</span>
			<span class="tok-k">return</span> <span class="tok-kc">null</span><span class="tok-o">;</span>
		<span class="tok-o">}</span>
		<span class="tok-n">pizza</span><span class="tok-o">.</span><span class="tok-na">preparer</span><span class="tok-o">();</span> <span class="tok-n">pizza</span><span class="tok-o">.</span><span class="tok-na">cuire</span><span class="tok-o">();</span> <span class="tok-n">pizza</span><span class="tok-o">.</span><span class="tok-na">couper</span><span class="tok-o">();</span> <span class="tok-n">pizza</span><span class="tok-o">.</span><span class="tok-na">emballer</span><span class="tok-o">();</span>
		<span class="tok-k">return</span> <span class="tok-n">pizza</span><span class="tok-o">;</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<img src="images/icons/warning.png" alt="Warning">
</td>
<td class="content">
<div class="title"><strong>QUESTION</strong></div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Faites le compte du nombre de classes concrètes dont cette classe dépend.</p>
</li>
<li>
<p>Et si vous ajoutez des pizzas de style Marseille à cette Pizzeria ?</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_problème_du_main_de_test_du_jeu_d_aventure"><a class="link" href="#_problème_du_main_de_test_du_jeu_d_aventure">Problème du main de test du jeu d&#8217;aventure</a></h3>
<div class="paragraph">
<p>Vous avez sûrement dans votre <code>main</code> de l&#8217;application de jeu d&#8217;aventure
une partie du code ressamblant à ceci :</p>
</div>
<div class="listingblock">
<div class="title">Adaptation des comportements à la situation</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">choix</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-s">&quot;Epee&quot;</span><span class="tok-o">))</span> <span class="tok-o">{</span>
	<span class="tok-n">perso</span><span class="tok-o">.</span><span class="tok-na">setArme</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-nf">ComportementEpee</span><span class="tok-o">());</span>
<span class="tok-o">}</span>
<span class="tok-k">else</span> <span class="tok-nf">if</span> <span class="tok-o">(</span><span class="tok-n">choix</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-s">&quot;Arc&quot;</span><span class="tok-o">))</span> <span class="tok-o">{</span>
	<span class="tok-n">perso</span><span class="tok-o">.</span><span class="tok-na">setArme</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-nf">ComportementArc</span><span class="tok-o">());</span>
	<span class="tok-k">else</span> <span class="tok-k">if</span> <span class="tok-o">...</span>
	<span class="tok-o">...</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ce code est peu adaptatif et va soufrir des évolutions, par exemple :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>changement de la liste des armes possibles</p>
</li>
<li>
<p>rajouter des <code>if then else</code> à chaque nouvelle arme</p>
</li>
<li>
<p>suppression de certaines armes</p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<img src="images/icons/warning.png" alt="Warning">
</td>
<td class="content">
<div class="title"><strong>QUESTION(s)</strong></div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Isoler ce code dans une classe <code>SimpleFabriqueArme</code> qui possèdera
une méthode <code>creerComportementArme(String type)</code> qui retourne le comportement
adapté en fonction du paramètre reçu.</p>
</li>
<li>
<p>Donnez le diagramme de classe <a href="http://www.uml.org/">UML&#8482;</a> de la nouvelle organisation.</p>
</li>
<li>
<p>Donnez le diagramme de séquence du main. Par exemple avec le code de test suivant :</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Chevalier</span> <span class="tok-n">perso</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Chevalier</span><span class="tok-o">(</span><span class="tok-s">&quot;JMI&quot;</span><span class="tok-o">);</span>

<span class="tok-n">SimpleFabriqueArme</span> <span class="tok-n">fabrique</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">SimpleFabriqueArme</span><span class="tok-o">();</span>
<span class="tok-n">ComportementArme</span> <span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">fabrique</span><span class="tok-o">.</span><span class="tok-na">creerComportementArme</span><span class="tok-o">(</span><span class="tok-s">&quot;Epee&quot;</span><span class="tok-o">);</span>

<span class="tok-n">perso</span><span class="tok-o">.</span><span class="tok-na">setArme</span><span class="tok-o">(</span><span class="tok-n">c</span><span class="tok-o">);</span>
<span class="tok-n">perso</span><span class="tok-o">.</span><span class="tok-na">frapper</span><span class="tok-o">();</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_about"><a class="link" href="#_about">About&#8230;&#8203;</a></h2>
<div class="sectionbody">
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>Document réalisé par <a href="mailto:{email}">Dut/Info-S3/M3105 - Semaine 3 (49)</a> via  <a href="http://asciidoctor.org/">Asciidoctor</a> (version <code>1.5.2</code>) de 'Dan Allen', lui même basé sur <a href="http://www.methods.co.nz/asciidoc">AsciiDoc</a>.
Pour l&#8217;instant ce document est libre d&#8217;utilisation et géré par la 'Licence Creative Commons'.
<span class="image"><a class="image" href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="images/88x31.png" alt="Licence Creative Commons"></a></span>
<a href="http://creativecommons.org/licenses/by-sa/3.0/">licence Creative Commons Paternité - Partage à l&#39;Identique 3.0 non transposé</a>.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2014-12-01 16:07:51 CET
</div>
</div>
</body>
</html>